<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [['$','$'], ['\\(','\\)']]}});</script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS": {"availableFonts":["TeX"],"scale": 150}});</script>

<style>
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback";
	font-size: 14px;
	padding: 0 12px;
	line-height: 22px;
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}


body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	color: #4080D0;
	text-decoration: none;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
	font-size: inherit;
	line-height: auto;
}

a:hover {
	color: #4080D0;
	text-decoration: underline;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left: 5px solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 14px;
	line-height: 19px;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

.mac code {
	font-size: 12px;
	line-height: 18px;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

/** Theming */

.vscode-light,
.vscode-light pre code {
	color: rgb(30, 30, 30);
}

.vscode-dark,
.vscode-dark pre code {
	color: #DDD;
}

.vscode-high-contrast,
.vscode-high-contrast pre code {
	color: white;
}

.vscode-light code {
	color: #A31515;
}

.vscode-dark code {
	color: #D7BA7D;
}

.vscode-light pre:not(.hljs),
.vscode-light code > div {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre:not(.hljs),
.vscode-dark code > div {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre:not(.hljs),
.vscode-high-contrast code > div {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

.vscode-light blockquote,
.vscode-dark blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.vscode-high-contrast blockquote {
	background: transparent;
	border-color: #fff;
}
</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

</style>

</head>
<body>
<p>‚è∞ Lab time is 20 min | <a href="https://yugabyte.slack.com/archives/C03176Y6BU0">slack feedback</a></p>
<hr>
<h2 id="about-this-lab">About this lab</h2>
<p>In this hands-on lab, you will perform a rolling software upgrade of a cluster on Yugabyte Platform. New versions of Yugabyte Platform will often contain security enhancements, advanced topology integrations, UI support, and much more. Many of the improvements involve addressing customer requests so clients may wish to upgrade quickly to implement the new features.</p>
<p>You will perform a rolling software upgrade so that the application doesn't experience any downtime. You will upgrade Platform from version 2.6 to 2.12 in this lab.</p>
<h3 id="objective">Objective</h3>
<p>As a sales engineer, I want to perform a software version upgrade to my Yugabyte Universe so that there is no disruption to my application.</p>
<h3 id="requirements">Requirements</h3>
<p>Here are the requirements for this lab:</p>
<ul>
<li>
<p>A deployed multi-node YugabyteDB cluster (a Universe) running on an older version of Yugabyte running a workload.</p>
</li>
<li>
<p>Yugabyte Platform credentials</p>
</li>
<li>
<p>Replicated dashboard password</p>
</li>
<li>
<p>A .pem file that you can use to connect to the EC2 instance of your YugabyteDB Platform host</p>
</li>
</ul>
<h3 id="resources">Resources</h3>
<p>The topology of the Yugabyte Universe in this lab will be a three node cluster set up in multiple zones in the same region. The Yugabyte Universe will be version 2.6 stable. The sample workload running on this cluster will be the <code>SqlInserts</code> Java application which will perform SQL reads and writes to the table. The Universe is deployed on AWS in us-east-1.</p>
<p>To find out how to deploy a Yugabyte Universe on Platform review <strong>LAB: Create a Yugabyte Multi-Zone Universe using Yugabyte Platform</strong>. Specify version 2.6-stable.</p>
<p>To find out how to run a sample workload on Yugabyte Platform, review <strong>LAB: Run YB-Sample-Apps from Yugabyte Platform.</strong></p>
<h2 id="update-platform-version">Update Platform version</h2>
<p>To update the Platform software version in your Universe, follow the subsequent steps:</p>
<ul>
<li>
<p>First, verify the YugabyteDB cluster is online and processing a workload.</p>
</li>
<li>
<p>Navigate to the Yugabyte Platform Admin console in the browser. This will be your platform URL.</p>
</li>
<li>
<p>Navigate to the Replicated dashboard. This is EC2's IP that hosts Platform at port 8800. Enter the password in the prompt.</p>
</li>
<li>
<p>Select the Settings icon located in the upper right corner of the dashboard.</p>
</li>
<li>
<p>Select <strong>View License</strong>.</p>
</li>
<li>
<p>For the option: Release Channel: Select <strong>change</strong>. This will navigate you to the following page:</p>
</li>
</ul>
<p><img src="file:///Users/markkim/Documents/YBU_repos/YBU_public/TFE/YBU-71/assets/images/Upgrade_Alpha_1600x700.png" alt="Description of this action."></p>
<ul>
<li>
<p>Select Alpha(Default). This will update the Platform version to the newest version. In this lab, it will be version 2.12.</p>
</li>
<li>
<p>Select Save.</p>
</li>
</ul>
<ul>
<li>
<p>Select <strong>Sync License</strong>. A success dialog box will confirm the change.</p>
</li>
<li>
<p>Select <strong>Dashboard</strong> in the nav bar to navigate to the Replicated dashboard.</p>
</li>
<li>
<p>Notice there is a message on the dashboard that indicates an update is available as shown in the following image:</p>
</li>
</ul>
<p><img src="file:///Users/markkim/Documents/YBU_repos/YBU_public/TFE/YBU-71/assets/images/update_available_1600x700.png" alt="Description of this action."></p>
<ul>
<li>
<p>Select the <strong>View release history</strong> link located in the middle panel.</p>
</li>
<li>
<p>Select <strong>Install Update</strong> to begin the software update process as shown in the following image:</p>
</li>
</ul>
<p><img src="file:///Users/markkim/Documents/YBU_repos/YBU_public/TFE/YBU-71/assets/images/upgrading_yugaware_1600x700.png" alt="Update yugaware to the most current version."></p>
<blockquote>
<p><strong>Question:</strong> Why would anyone wish to update to the alpha version which is more current than the latest version.</p>
<p><strong>Answer:</strong> To test new features and compatibility.</p>
</blockquote>
<h2 id="upgrade-the-universe">Upgrade the Universe</h2>
<p>Now that Platform has upgraded to a newer version, it's time to implement the software update on the nodes.</p>
<ul>
<li>
<p>Navigate to the Platform UI to implement the software upgrade.</p>
</li>
<li>
<p>Select the Universe that will undergo the software change.</p>
</li>
<li>
<p>In the <strong>Actions</strong> button, located on the upper right corner on the Universe Details page you will see an orange dot indicating an update is available as shown in the following image:</p>
</li>
</ul>
<p><img src="file:///Users/markkim/Documents/YBU_repos/YBU_public/TFE/YBU-71/assets/images/Upgrade_alpha_details_1600x700.png" alt="Implement the version change on the Universe."></p>
<ul>
<li>Select <strong>Upgrade Software</strong>, which will open the following form:</li>
</ul>
<p><img src="file:///Users/markkim/Documents/YBU_repos/YBU_public/TFE/YBU-71/assets/images/Upgrade_Software_1600x700.png" alt="Upgrade software version on the universe."></p>
<p>Confirm the following values are assigned:</p>
<table>
<thead>
<tr>
<th>Property Name</th>
<th>Property Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rolling Upgrade</td>
<td>Enabled</td>
</tr>
<tr>
<td>Upgrade Delay Between Servers (secs)</td>
<td>180</td>
</tr>
<tr>
<td>Server Version</td>
<td>2.12.1.0-b.41</td>
</tr>
<tr>
<td>Confirm software upgrade</td>
<td>Enabled</td>
</tr>
</tbody>
</table>
<ul>
<li>Select the <strong>Upgrade</strong> button at the bottom of the form to initiate the Universe upgrade process.</li>
</ul>
<p>Notice that the rolling upgrade method cycles between each node, allowing for high availability during the updating process.</p>
<p>After a few minutes, the updating process has completed as can be verified by the version number on the Universe Details page.</p>
<h2 id="reflection">Reflection</h2>
<p>In this lab, you implemented a software update to a cluster on Yugabyte Platform. Clients appreciate upgrades to the software, since the newer versions often address security, feature enhancements, and UI improvements. The ability to demonstrate how to perform a software upgrade without interruption to the application by using a rolling change methodology is critical to show especially for mission critical functions.</p>
<h2 id="terminate-the-universe">Terminate the universe</h2>
<p>If you do not plan on continuing the curriculum or decide it will be sometime before you touch this universe for a while, go ahead and terminate this universe so as not to incur unnecessary costs.</p>
<ul>
<li>Go to the Universe details page.</li>
<li>Select Actions.</li>
<li>Select Delete Universe from the drop down list.</li>
<li>Enter the name of the universe.</li>
<li>Check the Ignore Errors and Force Delete box.</li>
<li>Check the Delete Backups box.</li>
<li>Select Yes.</li>
</ul>
<p>Deleting a universe will also remove the underlying infrastructure in AWS.
Pausing a universe however will not.</p>

</body>
</html>
